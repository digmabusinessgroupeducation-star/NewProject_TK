Перем ДокументОбъект Экспорт;
Перем Контрагент Экспорт;
Перем ДоговорВзаиморасчетов Экспорт;
Перем СрокДействия Экспорт;
Перем ДатаНачалаДействия Экспорт;
Перем ЗаписыватьДвижения Экспорт;
Перем РезультатЗапросаПоТоварам Экспорт;
Перем ПроцентОтклонения Экспорт;

// устанавливает цены для контрагентов по товарам на заданный период
Функция УстановитьЦены() Экспорт
	Записывать = Истина;
	ВыборкаДанных=РезультатЗапросаПоТоварам.Выбрать();
	// перебираем выборку и делаем по ней движения
	Пока ВыборкаДанных.Следующий() Цикл
		НоваяЗапись=Добавить();
		НоваяЗапись.Период=ДатаНачалаДействия;//ДокументОбъект.Дата;
		НоваяЗапись.Регистратор=ДокументОбъект;
		НоваяЗапись.Контрагент=Контрагент;
		НоваяЗапись.ДоговорВзаиморасчетов=ДоговорВзаиморасчетов;
		НоваяЗапись.Номенклатура=ВыборкаДанных.Номенклатура;
		НоваяЗапись.Цена=ВыборкаДанных.Цена;
		НоваяЗапись.ЦенаБезНДС=ВыборкаДанных.ЦенаБезНДС;
		НоваяЗапись.СрокДействия=СрокДействия;
		НоваяЗапись.блЦенаИзготовителя=ВыборкаДанных.блЦенаИзготовителя;
		//LionH 25.08.2009
		НоваяЗапись.Характеристика=ВыборкаДанных.Характеристика;
		НоваяЗапись.ПроцентОтклонения=ПроцентОтклонения;
		//LionE 25.08.2009
	КонецЦикла;
	
	ДокументОбъект=Неопределено;
	РезультатЗапросаПоТоварам=Неопределено;
	
	Возврат Истина;
КонецФункции