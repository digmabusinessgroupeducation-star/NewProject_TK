



Функция ПолучитьТоварыПоЗадаче(ЗадачаТСД)Экспорт
	
	МассивТоваров = Новый Массив;
	РеквизитыОбъекта = ОбщегоНазначения.ЗначенияРеквизитовОбъекта(ЗадачаТСД,"ВидЗадачи,ГруппаНоменклатуры,ХранилищеОтборов");	
	
	Если РеквизитыОбъекта.ВидЗадачи = Перечисления.ТК_ВидыЗадачТСД.ГрафикИнвентаризаций Тогда
		Настройки = РеквизитыОбъекта.ХранилищеОтборов.Получить();
		Если Настройки = Неопределено Тогда
			ВызватьИсключение("Неопределены настроки графика!");
		КонецЕсли;
		
		СхемаКомпоновкиДанных = ПолучитьОбщийМакет("СхемаКомпоновкиОтбораНоменклатуры");
		КомпоновщикМакетаКомпоновкиДанных = Новый КомпоновщикМакетаКомпоновкиДанных;
		МакетКомпоновкиДанных = КомпоновщикМакетаКомпоновкиДанных.Выполнить(СхемаКомпоновкиДанных, Настройки,,,Тип("ГенераторМакетаКомпоновкиДанныхДляКоллекцииЗначений"));
		
		ПроцессорКомпоновкиДанных = Новый ПроцессорКомпоновкиДанных; 
		ПроцессорКомпоновкиДанных.Инициализировать(МакетКомпоновкиДанных); 
		
		ТаблицаРезультат = Новый ТаблицаЗначений; 
		ПроцессорВывода = Новый ПроцессорВыводаРезультатаКомпоновкиДанныхВКоллекциюЗначений; 
		
		ПроцессорВывода.УстановитьОбъект(ТаблицаРезультат); 
		ПроцессорВывода.Вывести(ПроцессорКомпоновкиДанных); 
		
		МассивТоваров = ТаблицаРезультат.ВыгрузитьКолонку("Номенклатура");

		
	ИначеЕсли ЗначениеЗаполнено(РеквизитыОбъекта.ГруппаНоменклатуры) Тогда
		МассивТоваров.Добавить(РеквизитыОбъекта.ГруппаНоменклатуры);
	КонецЕсли;
	
	Возврат МассивТоваров;

	
КонецФункции
